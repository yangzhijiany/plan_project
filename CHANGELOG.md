# 更新日志

## 新功能 (最新版本)

### 🎯 主要功能更新

1. **自然语言任务描述**
   - 用户可以通过自然语言描述任务，而不是直接输入子任务
   - LLM 会自动分析描述并生成子任务

2. **智能子任务生成**
   - LLM 根据任务描述自动生成子任务
   - 自动估算每个子任务的预计时间（小时）
   - 用户可以修改子任务的预计时间

3. **任务重要性设置**
   - 支持设置任务重要性：低、中、高
   - 重要性影响任务在日历中的颜色显示
   - 高重要性任务优先分配时间

4. **长期任务支持**
   - 支持创建长期任务（无截止日期）
   - 长期任务自动生成未来30天的计划
   - 适合每日重复任务（如：每天做 LeetCode）

5. **日历任务管理**
   - 点击日历中的任务可以查看详情
   - 支持修改任务的分配时间
   - 支持删除日历中的特定任务项
   - 根据任务重要性显示不同颜色

6. **改进的用户界面**
   - 更清晰的任务创建流程
   - 实时显示子任务列表
   - 可以随时修改子任务时间
   - 直观的日历视图

### 🔧 技术改进

1. **数据库模型重构**
   - 新增 `Task` 表：存储任务信息
   - 新增 `Subtask` 表：存储子任务信息
   - 新增 `DailyTaskItem` 表：存储每日任务分配
   - 保留旧表以兼容现有数据

2. **API 端点更新**
   - `POST /tasks` - 创建新任务
   - `GET /tasks` - 获取所有任务
   - `GET /tasks/{task_id}` - 获取任务详情
   - `POST /tasks/{task_id}/generate-subtasks` - 生成子任务
   - `POST /tasks/{task_id}/generate-plan` - 生成每日计划
   - `PUT /subtasks/{subtask_id}` - 更新子任务时间
   - `GET /calendar` - 获取日历数据
   - `PUT /daily-items/{item_id}` - 更新每日任务项
   - `DELETE /daily-items/{item_id}` - 删除每日任务项
   - `DELETE /tasks/{task_id}` - 删除任务

3. **前端组件更新**
   - 全新的任务创建界面
   - 改进的日历视图
   - 任务详情编辑模态框
   - 更好的错误处理

### 📝 使用流程

1. **创建任务**
   - 输入任务名称
   - 用自然语言描述任务
   - 选择任务重要性
   - 选择是否为长期任务
   - 设置截止日期（如果不是长期任务）

2. **生成子任务**
   - 点击"生成子任务"按钮
   - LLM 分析任务描述并生成子任务
   - 查看生成的子任务列表
   - 修改子任务的预计时间（如需要）

3. **生成计划**
   - 点击"生成每日计划"按钮
   - LLM 根据子任务和时间生成每日计划
   - 计划自动保存到数据库

4. **查看和管理**
   - 前往日历视图查看所有计划
   - 点击任务查看详情
   - 修改任务的分配时间
   - 删除不需要的任务项

### 🐛 已知问题

- 暂无

### 🔮 未来计划

- 任务完成状态标记
- 任务进度跟踪
- 任务提醒功能
- 数据导出功能
- 任务模板功能

